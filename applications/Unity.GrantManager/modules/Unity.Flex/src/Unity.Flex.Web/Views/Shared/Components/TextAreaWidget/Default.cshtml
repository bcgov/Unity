@using Unity.Flex.Web.Views.Shared.Components;
@using Unity.Flex.Web.Views.Shared.Components.TextAreaWidget;
@using Unity.Flex.Worksheets.Definitions;
@using Unity.Flex;

@model TextAreaViewModel;

@if (Model.Field != null)
{
    
    var fieldId = Model.WorksheetId.HasValue
        ? $"{Model.Field.Name}.{Model.Name}.{Model.Field.Id}.{Model.WorksheetId}"
        : $"{Model.Field.Name}.{Model.Name}.{Model.Field.Id}";
    
    <textarea id="@fieldId"
              name="@fieldId"
              rows="@(((TextAreaDefinition?)Model.Field?.Definition?.ConvertDefinition(Model.Field.Type))?.Rows ?? 1)"
              maxlength="@(((TextAreaDefinition?)Model.Field?.Definition?.ConvertDefinition(Model.Field.Type))?.MaxLength)"
              class="form-control"              
              onchange="@($"notifyFieldChange('{Model.Name}', '{Model.Field?.UiAnchor}', this)")">@Model?.Field?.CurrentValue?.ConvertInputValueOrNull(Model.Field.Type)</textarea>
}